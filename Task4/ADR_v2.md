### <a name="_b7urdng99y53"></a>**Название задачи:** 
Архитектура функционала открытия депозитов для MVP
### <a name="_hjk0fkfyohdk"></a>**Автор:**
Алексей Кашуба
### <a name="_uanumrh8zrui"></a>**Дата:**
22.04.2025
### <a name="_3bfxc9a45514"></a>**Функциональные требования**


|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|UC1| Клиент| Просмотр актуальных ставок по депозитам|1. Клиент заходит на сайт банка  2. Клиент смотрит актуальные ставки по депозитам|
|UC2| Клиент| Подача заявки на открытие депозита|1. Клиент заходит на сайт банка  2. Клиент снажимает кнопку "Открыть депозит" 3. В открывшейся форме ввода клиент задает Ф. И. О. и номер телефона и подтверждает отправку формы |
|UC3| Менеджер кол-центра| Взаимодействие с клиентом|1. Менеджер кол-центра видит в своей системе заявку клиента  2. Менеджер кол-центра запрашивает в отделе бэк-офис расчте ставки для данного клиента. 3. Менеджер кол-центра связывается с клиентом по телефону и предлагает особые условия |
|UC4| Клиент| Идентификация в отделении банка (только для новых клиентов) |1. Клиент приходит в отделение для идентификации  2. Клиент передает свои паспортные данные сотрудникам банка 3. Клиент открывает депозит 4. При жалании, клиент оформляет личный кабинет в интернет-банке|
|UC5| Сотрудник банка| Открытие депозита новому клиенту в банке |1. Сотрудник идентифицирует клиент по паспорту  2. Сотрудник заводит данные клиента в АБС и получает расчет ставки. 3. Если клиента это устраивает, сотрудник открывает через АБС депозит и выдает клиенту необходимые документы. 4. При жалании клиента, сотрудник оформляет личный кабинет в интернет-банке|
|UC6| Клиент| Просмотр ставок в интернет-банке (только для идентифицированных клиентов клиентов) |1. Клиент входит в интернет банк по логину/паролю и подтверждению по СМС  2. Клиент видит актуальные и персональные ставки |
|UC7| Клиент| Открытие депозита в интернет-банке (только для идентифицированных клиентов клиентов) |1. Клиент входит в интернет банк по логину/паролю и подтверждению по СМС  2. Клиент видит актуальные и персональные ставки 3. Клиент выбирает ставку, указывает счет и сумму депозита 4. Клиент подтверждает открытие депозита по СМС|
|UC8| Сотрудник бэк-офис| Обработка заявок из отделения банка  |1. Сотрудник бэк-офис получает запрос расчетав ставки депозита из отделения банка через систему АБС  2. Сотрудник бэк-офис запрашивает в кредитном отделе актуальную ставку и уровень риска клиента. 3. На основе полученных данных сотрудник бэк-офис расчитывает персональную ставку и отправляет сотруднику отделения банка через АБС|
|UC9| Сотрудник бэк-офис| Обработка заявок из кол-центра  |1. Сотрудник бэк-офис получает запрос расчетав ставки депозита из кол-центра через систему АБС  2. Сотрудник бэк-офис запрашивает в кредитном отделе актуальную ставку и уровень риска клиента. 3. На основе полученных данных сотрудник бэк-офис расчитывает персональную ставку и отправляет сотруднику кол-центра через АБС|
|UC9| Сотрудник бэк-офис| Обработка заявок из кол-центра  |1. Сотрудник бэк-офис получает запрос расчетав ставки депозита из кол-центра через систему АБС  2. Сотрудник бэк-офис запрашивает в кредитном отделе актуальную ставку и уровень риска клиента. 3. На основе полученных данных сотрудник бэк-офис расчитывает персональную ставку и отправляет сотруднику кол-центра через АБС 4. Сотрудник бэк офис через АБС отправляет СМС оповещение клиенту|
|UC10| Сотрудник отдела кредитования| Расчет актуальной ставки  |1. Сотрудник отдела кредитования ежедневно расчитывает актуальную ставку депозита на основе ставки рефинансированияю используя функционал системы АБС 2. Расчитанная ставка сохранеяется в системе АБС|
|UC11| Сотрудник отдела кредитования| Расчет уровня риска клиента  |1. Сотрудник отдела кредитования через АБС получает запрос от сотрудника бэк-офис запрос на расчет уровня риска по определенному клиенту 2. Сотрудник отдела кредитования выполняет расчет уровня риска используя функционал системы АБС. 3 Расчитанная ставка передается сотруднику бэк-офис через систему АБС|
|UC12| Клиент| Клиент уточняет информацию в кол центре |1. Клиент звонит в кол-центр банка для уточнения информации по ставкам депозита 2. Если есть свободный сотрудник, он отвечает на вопросы клиента и сообщает актуальные ставки. Если все сотрудники заняты, клиент автоматически перенаправляется в партнерский кол-центри получает аналогичную информацию|
|UC13| Сотрудник партнерского кол-центра| Получает актуальные ставки по депозиту |1.Сотрудник партнерского кол-центра скачивает файл с актуальными ставками по депозиту по защищенной ссылке из кол-центра банка|
|UC14| Сотрудник партнерского кол-центра| Обрабатывает заявки перенаправленные из кол-центра банка |1.Сотрудник партнерского кол-центра получает перенаправленный звонок из кол-центра банка 2. Сотруднику кол-центра отвечает на вопросы клиента и сообщает актуальные ставки, информацию по котором получил заранее. 3. Если требуется расчет персональных ставок, клиент перенаправляется в кол-центр банка (так как у кол центра нет доступа к информации по уровню риска клиента)|
|UC15| Сотрудник бэк-офис| Передача актуальных ставок по депозиту |1.Каждое утро передает  информацию о актуальным ставкам депозита в систему кол-центра|

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно-значимые требования.

|**№**|**Требование**|
| :-: | :- |
|NF1|Данные сайта и интернет-банка необходимо защищать с помощью механизма шифрования трафика|
|NF2|Интерфейс работы сайта и интернет-банка должен быть максимально удобным для клиента|
|NF3|Пользователи при работе должны видеть привычные цвета и брендированные элементы|
|NF4|Все сервисы АБС должны работать 24/7|
|NF5|Все сервисы АБС должны работать в 99,9% случаев|
|NF6|В случае сбоев интернет-банка, работоспособность необходимо восстановить в течение суток|
|NF7|В случае сбоя в ЦОД необходимо автоматически переключаться на резервный|
|NF8|Отклик по всем операциям должен быть максимально быстрым и занимать миллисекунды|
|NF9|Должна быть поддержка интеграционного тестирования|
|NF10|Необходимо избегать прямой работы интернет-банка с API|
|NF11|Данные передаваемые между внутренними и внешними ситемами необходимо защищать с помощью механизма шифрования трафика|
### <a name="_qmphm5d6rvi3"></a>**Решение по доработке АБС(без изменений)**

Диаграммы С4 контекста и контейнеров  в файлах Context.puml и Container.puml в Task3

Перед создании MVP продукта я проанализировал схему интекграции приложений из Task1, и считаю, что первым правильным решением было бы исключение из функционала расчета через excel файлы и взаимодействие через электронную почты. Данные сервисы наиболее подвержены человеческому фактору, из-за которого могут возникать ошибки, а так же они замедляют комуникацию между элементами системы. Считаю, что функционал расчета ставок и кредитного рейтинга нужно перенести в АБС, так как удобно, когда все находится в единой базе и в соответстви с правами доступа мы можем считать и получать эти данные. Единственное ограничение, интернет банк не будет напрямую контактировать с АБС, чтобы ее сильно не просаживать. Заявки будут попадать в АБС через внутренние системы кол-центра и фронт-офиса.
Технологичей стек мы не меняем, следовательно не потребуется нанимать новых сотрудников для реализациим функционала. Так как АБС написана сотрудниками банка, сотрудники согут достаточно быстро разобраться в своем коде и дописать функционал с минимальными рисками.
Доработа интернет-банка будет незначительной, необходимо добавить дополнительную страницу с интерфейсом открытия депозита

#### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Рассматривалось альтернативные решения:
 Ввместо Excel файла написать отдельный микросекрвис в котором могли бы взаимодействовать бэк-офис и кредитный отдел. Решение не подошло из-за более высоких трудозатрат. Потребуется писать не только отдельный микросервис, а так же набор интерграций с системами фронт-офиса, кол-центра, АБС. 

**Недостатки, ограничения, риски**

Главный недостаток данного решения с использованием АБС - ограниченность в масштабировании АБС (только верикальное масштабирование). На мой взгляд,  этапе MVP это допустимо, так как изначально не планируется мощный наплыв клиентов. Так как АБС написана на достаточно устаревшем стеке, возможно в ближайшем будущем будет запланирован ее перевод на микросервисы, который решит проблему масштабирования.
Так же проблемы могут возникнут, если интернет-банк интегрировать напрямую в АБС. Так как на этапе MVP не планируются болшие нагрузки, это не критично. В будущем, когда АБС будет переписана на микросервисы, эта проблема решится автоматически, так как произойдет разделение базы данных.


### <a name="_qmphm5d6rvi31"></a>**Решение по взаимодействию кол-центров**

Данныая версия документа дополнена описанием функционала, необходимого для работы взаимосвязи внешнего и нашего кол-центра. Так как остальной функциона не менялся, мы создали диаграммы только по новому функционалу и связанных с ним системам.
Диаграммы С4 контекста и контейнеров  в файлах Context_call_center.puml и Container_call_center.puml

#### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Рассматривалось альтернативные решения:
 Написание API для взаимодействия между внутренним и внешним кол-центром для получения ставок по запросу. Основной минус этого решение - наиболее сложная структура, потребуется развернуть веб сервис и дополнительно писать API. Не факт, что клиент захочет писать функционал подключения к API. Считаю, что в нашем случае, когда нет большого объема данных, решение с файлом достаточно приостое, легко внедряемое и наименее трудоемкое. 

**Недостатки, ограничения, риски**

Недостаток этого решения - человеческий фактор. Сотрудник внешнего кол-центра может запутаться в этих файлах за разные даты и выдать клиенту не ту информацию. Решение с API, которое бы онлайн выдавало актуальные данные, имело бы преимущество
